---
import Hedrite from "../../libs/hedrite-web/src/Hedrite.svelte";
import Layout from "../layouts/Layout.astro";

const birthday = new Date("1997-03-09");
const now = new Date();

function fullYearsBetween(date1: Date, date2: Date): number {
    let years = date2.getFullYear() - date1.getFullYear();

    // Adjust if the current year’s month/day hasn’t passed yet
    const monthDiff = date2.getMonth() - date1.getMonth();
    const dayDiff = date2.getDate() - date1.getDate();
    if (monthDiff < 0 || (monthDiff === 0 && dayDiff < 0)) {
        years--;
    }

    return years;
}

const age = fullYearsBetween(birthday, now);
---

<Layout>
    <section class="intro">
        <p>
            Hi, I'm Job Savelsberg, {age} years old, living in the Netherlands.
        </p>
        <p>
            I'm a software engineer with a passion for creating things. Apart
            from software, I especially enjoy making music and photography.
        </p>
    </section>
    <div class="hedrite-wrapper" tabindex="0">
        <Hedrite client:idle="svelte" />
    </div>
</Layout>

<style>
    .intro {
        transition: opacity 0.3s ease-in-out;
    }

    .intro:has(+ .hedrite-wrapper:focus-within) {
        opacity: 0;
    }

    .hedrite-wrapper {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: -10;
        width: 100vw;
        height: 100vh;
    }
</style>
